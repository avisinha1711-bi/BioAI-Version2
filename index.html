<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BioAI – AI-powered Cancer Photoacoustic Diagnosis</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: #ffffff;
            color: #222222;
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
        }
        
        /* Welcome Screen Styles */
        .welcome-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #ffffff;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            transition: opacity 0.5s ease;
        }
        
        .welcome-logo {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin-bottom: 40px;
        }
        
        .welcome-logo-text {
            font-size: 5rem;
            font-weight: 700;
            color: #0d2a4d;
            text-align: center;
        }
        
        .tagline {
            font-size: 1.2rem;
            color: #0d4a8c;
            margin-top: 20px;
            text-align: center;
            font-weight: 500;
        }
        
        .get-started-btn {
            padding: 18px 50px;
            background: linear-gradient(45deg, #0d4a8c, #0d7ba8);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.4rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            margin-top: 40px;
            box-shadow: 0 4px 6px rgba(13, 74, 140, 0.2);
        }
        
        .get-started-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 14px rgba(13, 74, 140, 0.3);
            background: linear-gradient(45deg, #0a3a70, #0b6a8a);
        }
        
        .get-started-btn:active {
            transform: translateY(0);
        }
        
        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            flex: 1;
            display: none; /* Initially hidden */
        }
        
        header {
            text-align: center;
            padding: 20px 0;
            margin-bottom: 30px;
        }
        
        .logo {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin-bottom: 10px;
        }
        
        .logo-text {
            font-size: 3rem;
            font-weight: 700;
            color: #0d2a4d;
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: #0d2a4d;
            margin-top: 10px;
            font-weight: 600;
        }
        
        .author {
            font-size: 1rem;
            color: #0d2a4d;
            margin-top: 5px;
            font-weight: 500;
        }
        
        .section {
            margin: 40px 0;
            padding: 30px;
            background: #ffffff;
            border-radius: 15px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
        }
        
        /* Modified: Added dark black boundary for Patient Information and Infrared Frequency Readings */
        .section.patient-info-section,
        .section.infrared-readings-section {
            border: 3px solid #000000;
        }
        
        .section-title {
            font-size: 1.8rem;
            color: #0d4a8c;
            margin-bottom: 25px;
            text-align: center;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(13, 74, 140, 0.3);
        }
        
        .input-group {
            margin-bottom: 25px;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 12px;
            font-size: 1.1rem;
            color: #333333;
            font-weight: 500;
        }
        
        .input-group input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e1e5eb;
            border-radius: 8px;
            font-size: 1.1rem;
            background: #ffffff;
            color: #222222;
            transition: all 0.3s;
        }
        
        .input-group input:focus {
            outline: none;
            border-color: #0d4a8c;
            box-shadow: 0 0 0 3px rgba(13, 74, 140, 0.2);
        }
        
        /* New styles for gender selection */
        .gender-selection {
            margin-top: 15px;
        }
        
        .gender-label {
            display: block;
            margin-bottom: 12px;
            font-size: 1.1rem;
            color: #333333;
            font-weight: 500;
        }
        
        .gender-options {
            display: flex;
            gap: 20px;
        }
        
        .gender-option {
            display: flex;
            align-items: center;
            cursor: pointer;
        }
        
        .gender-option input {
            margin-right: 8px;
            width: auto;
        }
        
        .feedback {
            margin-top: 10px;
            padding: 10px;
            border-radius: 5px;
            font-size: 0.95rem;
            display: none;
        }
        
        .feedback.normal {
            background: rgba(46, 204, 113, 0.15);
            color: #1e7e34;
            display: block;
            border-left: 4px solid #1e7e34;
        }
        
        .feedback.high {
            background: rgba(231, 76, 60, 0.15);
            color: #a71e2a;
            display: block;
            border-left: 4px solid #a71e2a;
        }
        
        .feedback.low {
            background: rgba(241, 196, 15, 0.15);
            color: #b37400;
            display: block;
            border-left: 4px solid #b37400;
        }
        
        .feedback.error {
            background: rgba(231, 76, 60, 0.15);
            color: #a71e2a;
            display: block;
            border-left: 4px solid #a71e2a;
        }
        
        .btn {
            display: block;
            width: 100%;
            padding: 18px;
            background: linear-gradient(45deg, #0d4a8c, #0d7ba8);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            margin-top: 20px;
            box-shadow: 0 4px 6px rgba(13, 74, 140, 0.2);
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 14px rgba(13, 74, 140, 0.3);
            background: linear-gradient(45deg, #0a3a70, #0b6a8a);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn-alt {
            background: linear-gradient(45deg, #0d2a4d, #0d4a8c);
        }
        
        .btn-alt:hover {
            background: linear-gradient(45deg, #081d38, #0a3a70);
        }
        
        .result {
            margin-top: 30px;
            padding: 25px;
            border-radius: 10px;
            text-align: center;
            display: none;
        }
        
        .result.high-risk {
            background: #ffeaea;
            border: 2px solid #e74c3c;
            display: block;
        }
        
        .result.low-risk {
            background: #e8f7ef;
            border: 2px solid #2ecc71;
            display: block;
        }
        
        .probability-meter {
            height: 30px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 15px;
            margin: 20px 0;
            overflow: hidden;
            position: relative;
            border: 1px solid #e1e5eb;
        }
        
        .probability-fill {
            height: 100%;
            border-radius: 15px;
            transition: width 0.5s ease-in-out;
        }
        
        .probability-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-size: 0.9rem;
            color: #555555;
        }
        
        .risk-level {
            font-size: 1.5rem;
            font-weight: 700;
            margin: 15px 0;
        }
        
        .recommendation {
            margin-top: 15px;
            font-size: 1.1rem;
            line-height: 1.5;
            padding: 15px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.7);
            color: #222222;
        }
        
        .patient-info {
            margin-top: 20px;
            padding: 15px;
            background: #ffffff;
            border-radius: 8px;
            text-align: left;
            border: 2px solid #000000;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        .patient-info p {
            margin: 10px 0;
            font-size: 1.1rem;
            color: #222222;
        }
        
        .patient-counter {
            text-align: center;
            font-size: 1.2rem;
            margin-bottom: 20px;
            color: #0d4a8c;
            font-weight: 600;
            padding: 15px;
            background: #ffffff;
            border-radius: 8px;
            border: 2px solid #000000;
        }
        
        .next-patient {
            display: none;
            margin-top: 20px;
            text-align: center;
        }
        
        /* Hide the API status element */
        .api-status {
            display: none !important;
        }
        
        .disclaimer {
            margin-top: 30px;
            padding: 15px;
            background: #fff3cd;
            border: 2px solid #856404;
            border-radius: 8px;
            font-size: 0.85rem;
            color: #664d03;
            text-align: center;
            font-weight: 500;
        }
        
        .footer-text {
            text-align: center;
            margin-top: 20px;
            padding: 15px;
            color: #4a6fa5;
            font-size: 1rem;
            font-weight: 500;
        }
        
        /* Graph container styles */
        .graph-container {
            margin: 30px 0;
            padding: 20px;
            background: #ffffff;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
            border: 1px solid #e1e5eb;
        }
        
        .graph-title {
            font-size: 1.5rem;
            color: #0d4a8c;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .graph-description {
            font-size: 1rem;
            color: #555;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .graph-canvas-container {
            position: relative;
            height: 300px;
            width: 100%;
        }
        
        /* New styles for molecular reasons section */
        .molecular-reasons {
            margin-top: 25px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border: 2px solid #0d4a8c;
            text-align: left;
        }
        
        .molecular-reasons h4 {
            font-size: 1.5rem;
            color: #0d4a8c;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .molecular-reasons ul {
            margin-left: 20px;
            margin-bottom: 20px;
        }
        
        .molecular-reasons li {
            margin-bottom: 10px;
            font-size: 1.1rem;
            line-height: 1.5;
        }
        
        .sequence-example {
            margin-top: 15px;
            padding: 15px;
            background: #ffffff;
            border-radius: 8px;
            border: 1px solid #e1e5eb;
            font-family: monospace;
            font-size: 1.2rem;
            text-align: center;
        }
        
        .sequence-arrow {
            display: inline-block;
            margin: 0 15px;
            font-size: 1.5rem;
            color: #0d4a8c;
        }
        
        /* New styles for action buttons */
        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }
        
        .action-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }
        
        .action-btn.schedule {
            background: linear-gradient(45deg, #0d4a8c, #0d7ba8);
            color: white;
        }
        
        .action-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 14px rgba(13, 74, 140, 0.3);
        }
        
        /* New styles for redirect page */
        .redirect-page {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #ffffff;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            display: none;
        }
        
        .redirect-content {
            text-align: center;
            padding: 40px;
            background: #f8f9fa;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            max-width: 600px;
            width: 90%;
        }
        
        .redirect-title {
            font-size: 2.5rem;
            font-weight: 700;
            color: #0d2a4d;
            margin-bottom: 20px;
        }
        
        .redirect-message {
            font-size: 1.2rem;
            color: #0d4a8c;
            margin-bottom: 30px;
            line-height: 1.6;
        }
        
        .back-btn {
            padding: 15px 30px;
            background: linear-gradient(45deg, #0d4a8c, #0d7ba8);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            box-shadow: 0 4px 6px rgba(13, 74, 140, 0.2);
        }
        
        .back-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 14px rgba(13, 74, 140, 0.3);
            background: linear-gradient(45deg, #0a3a70, #0b6a8a);
        }
        
        /* New styles for scheduling options */
        .scheduling-options {
            margin-top: 20px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border: 2px solid #0d4a8c;
            text-align: left;
            display: none;
        }
        
        .scheduling-title {
            font-size: 1.5rem;
            color: #0d4a8c;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .scheduling-urgency {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .urgency-option {
            flex: 1;
            min-width: 200px;
            margin: 10px;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }
        
        .urgency-option:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
        }
        
        .urgency-option.selected {
            border-color: #0d4a8c;
            background: rgba(13, 74, 140, 0.1);
        }
        
        .urgency-high {
            background: #ffeaea;
            border-color: #e74c3c;
        }
        
        .urgency-medium {
            background: #fff3cd;
            border-color: #ffc107;
        }
        
        .urgency-low {
            background: #e8f7ef;
            border-color: #2ecc71;
        }
        
        .urgency-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        .urgency-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .urgency-desc {
            font-size: 0.9rem;
            color: #555;
        }
        
        .test-options {
            margin-top: 20px;
        }
        
        .test-options h4 {
            font-size: 1.3rem;
            color: #0d4a8c;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .test-option {
            display: flex;
            align-items: center;
            padding: 10px;
            background: #ffffff;
            border-radius: 8px;
            border: 1px solid #e1e5eb;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .test-option:hover {
            background: #f0f7ff;
            border-color: #0d4a8c;
        }
        
        .test-option.selected {
            background: rgba(13, 74, 140, 0.1);
            border-color: #0d4a8c;
        }
        
        .test-checkbox {
            margin-right: 10px;
        }
        
        .test-name {
            font-size: 1rem;
            font-weight: 500;
        }
        
        .schedule-form {
            margin-top: 20px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #e1e5eb;
            border-radius: 8px;
            font-size: 1rem;
        }
        
        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: #0d4a8c;
            box-shadow: 0 0 0 3px rgba(13, 74, 140, 0.2);
        }
        
        .form-row {
            display: flex;
            gap: 15px;
        }
        
        .form-row .form-group {
            flex: 1;
        }
        
        .schedule-submit {
            margin-top: 20px;
            padding: 15px;
            background: linear-gradient(45deg, #0d4a8c, #0d7ba8);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
        }
        
        .schedule-submit:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 14px rgba(13, 74, 140, 0.3);
            background: linear-gradient(45deg, #0a3a70, #0b6a8a);
        }
        
        /* New styles for test suggestions */
        .test-suggestions {
            margin-top: 15px;
            padding: 15px;
            background: #e8f4ff;
            border-radius: 8px;
            border-left: 4px solid #0d4a8c;
        }
        
        .test-suggestions h5 {
            font-size: 1.1rem;
            color: #0d4a8c;
            margin-bottom: 10px;
        }
        
        .test-suggestions ul {
            margin-left: 20px;
            color: #0d4a8c;
        }
        
        .test-suggestions li {
            margin-bottom: 5px;
        }
        
        @media (max-width: 768px) {
            .welcome-logo-text {
                font-size: 3.5rem;
            }
            
            .tagline {
                font-size: 1rem;
            }
            
            .get-started-btn {
                padding: 15px 40px;
                font-size: 1.2rem;
            }
            
            .container {
                width: 95%;
                padding: 20px;
            }
            
            .logo-text {
                font-size: 2.5rem;
            }
            
            .section {
                padding: 20px;
            }
            
            .section-title {
                font-size: 1.5rem;
            }
            
            .gender-options {
                flex-direction: column;
                gap: 10px;
            }
            
            .disclaimer {
                font-size: 0.8rem;
                padding: 12px;
            }
            
            .footer-text {
                font-size: 0.9rem;
                padding: 10px;
            }
            
            .graph-canvas-container {
                height: 250px;
            }
            
            .sequence-example {
                font-size: 1rem;
            }
            
            .sequence-arrow {
                margin: 0 10px;
                font-size: 1.2rem;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .redirect-title {
                font-size: 2rem;
            }
            
            .redirect-message {
                font-size: 1rem;
            }
            
            .scheduling-urgency {
                flex-direction: column;
            }
            
            .urgency-option {
                min-width: 100%;
            }
            
            .test-grid {
                grid-template-columns: 1fr;
            }
            
            .form-row {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- Welcome Screen with Get Started Button -->
    <div class="welcome-screen" id="welcome-screen">
        <div class="welcome-logo">
            <div class="welcome-logo-text">BioAI Research</div>
        </div>
        <button class="get-started-btn" id="get-started-btn">GET STARTED</button>
        <div class="tagline">Intersection of Biology with Technology</div>
    </div>

    <!-- Main Website Content (Initially Hidden) -->
    <div class="container" id="main-content">
        <header>
            <div class="logo">
                <div class="logo-text">BioAI</div>
            </div>
            <div class="subtitle">AI-powered Cancer Photoacoustic Diagnosis</div>
            <div class="author">Developed by: Avi Sinha</div>
        </header>

        <!-- API status element is present but hidden with CSS -->
        <div class="api-status" id="api-status" style="display: none;">
            <i class="fas fa-sync fa-spin"></i> Checking backend connection...
        </div>

        <!-- Modified: Added patient-info-section class for dark black boundary -->
        <div class="section patient-info-section">
            <h2 class="section-title">Patient Information</h2>
            
            <div class="input-group">
                <label for="patient-name">Patient Name</label>
                <input type="text" id="patient-name" placeholder="Enter patient name...">
                <div class="feedback" id="name-feedback"></div>
            </div>
            
            <div class="input-group">
                <label for="patient-age">Patient Age</label>
                <input type="number" id="patient-age" min="1" max="120" placeholder="Enter patient age...">
                <div class="feedback" id="age-feedback"></div>
            </div>
            
            <!-- Added gender selection -->
            <div class="gender-selection">
                <label class="gender-label">Gender</label>
                <div class="gender-options">
                    <div class="gender-option">
                        <input type="radio" id="gender-male" name="gender" value="male">
                        <label for="gender-male">Male</label>
                    </div>
                    <div class="gender-option">
                        <input type="radio" id="gender-female" name="gender" value="female">
                        <label for="gender-female">Female</label>
                    </div>
                </div>
                <div class="feedback" id="gender-feedback"></div>
            </div>
        </div>

        <!-- Modified: Added infrared-readings-section class for dark black boundary -->
        <div class="section infrared-readings-section">
            <!-- Moved patient counter here, just above the section title -->
            <div class="patient-counter" id="patient-counter">
                Patient 1: Provide IR frequency readings in Mega Hertz (MHz)
            </div>
            
            <h2 class="section-title">Infrared Frequency Readings</h2>
            
            <div class="input-group">
                <label for="input1">ENTER THE READING OF (-C=O) VIBRATION OBSERVED IN PHOTOACOUSTIC SPECTROSCOPY (~1720 cm⁻¹)</label>
                <input type="number" step="0.01" id="input1" class="frequency-input" placeholder="Enter value...">
                <div class="feedback" id="feedback1"></div>
            </div>
            
            <div class="input-group">
                <label for="input2">ENTER THE READING OF (-CH₃) VIBRATION OBSERVED IN PHOTOACOUSTIC SPECTROSCOPY (~1300 cm⁻¹)</label>
                <input type="number" step="0.01" id="input2" class="frequency-input" placeholder="Enter value...">
                <div class="feedback" id="feedback2"></div>
            </div>
            
            <div class="input-group">
                <label for="input3">ENTER THE READING OF (-C-OH) VIBRATION OBSERVED IN PHOTOACOUSTIC SPECTROSCOPY (~1100 cm⁻¹)</label>
                <input type="number" step="0.01" id="input3" class="frequency-input" placeholder="Enter value...">
                <div class="feedback" id="feedback3"></div>
            </div>
            
            <div class="input-group">
                <label for="input4">ENTER THE READING OF (-O-H) VIBRATION OBSERVED IN PHOTOACOUSTIC SPECTROSCOPY (~3500 cm⁻¹)</label>
                <input type="number" step="0.01" id="input4" class="frequency-input" placeholder="Enter value...">
                <div class="feedback" id="feedback4"></div>
            </div>
            
            <!-- Changed button text to "Run Auto Analysis" -->
            <button class="btn" id="analyze-btn">Run Auto Analysis</button>
            
            <div class="next-patient" id="next-patient">
                <button class="btn btn-alt" id="next-btn">Next Patient</button>
            </div>
        </div>

        <div class="section">
            <h2 class="section-title">Diagnosis Results</h2>
            
            <div class="result" id="result">
                <h3>Patient Diagnosis</h3>
                
                <div class="probability-meter">
                    <div class="probability-fill" id="probability-fill"></div>
                </div>
                
                <div class="probability-labels">
                    <span>0%</span>
                    <span>50%</span>
                    <span>100%</span>
                </div>
                
                <div class="risk-level" id="risk-level"></div>
                <div id="probability-text">Probability: <span id="probability-value">0</span>%</div>
                <div class="recommendation" id="recommendation"></div>
                
                <!-- Action buttons for all probability levels -->
                <div class="action-buttons" id="action-buttons">
                    <button class="action-btn schedule" id="schedule-btn">Schedule Follow-up Tests</button>
                </div>
                
                <!-- Scheduling Options - Shown for all probability levels -->
                <div class="scheduling-options" id="scheduling-options">
                    <h3 class="scheduling-title">Schedule Follow-up Tests</h3>
                    
                    <div class="scheduling-urgency">
                        <div class="urgency-option urgency-high" data-urgency="high">
                            <div class="urgency-icon"><i class="fas fa-exclamation-triangle"></i></div>
                            <div class="urgency-title">High Urgency</div>
                            <div class="urgency-desc">Within 24-48 hours</div>
                        </div>
                        <div class="urgency-option urgency-medium" data-urgency="medium">
                            <div class="urgency-icon"><i class="fas fa-clock"></i></div>
                            <div class="urgency-title">Medium Urgency</div>
                            <div class="urgency-desc">Within 1-2 weeks</div>
                        </div>
                        <div class="urgency-option urgency-low" data-urgency="low">
                            <div class="urgency-icon"><i class="fas fa-calendar-check"></i></div>
                            <div class="urgency-title">Low Urgency</div>
                            <div class="urgency-desc">Within 1 month</div>
                        </div>
                    </div>
                    
                    <!-- Test Suggestions Based on Probability -->
                    <div class="test-suggestions" id="test-suggestions">
                        <h5>Recommended Tests Based on Your Risk Level:</h5>
                        <ul id="suggested-tests-list">
                            <!-- Suggested tests will be populated here -->
                        </ul>
                    </div>
                    
                    <div class="test-options">
                        <h4>Select Diagnostic Tests</h4>
                        <div class="test-grid">
                            <div class="test-option" data-test="biopsy">
                                <input type="checkbox" class="test-checkbox" id="test-biopsy">
                                <label for="test-biopsy" class="test-name">Biopsy</label>
                            </div>
                            <div class="test-option" data-test="ct-scan">
                                <input type="checkbox" class="test-checkbox" id="test-ct">
                                <label for="test-ct" class="test-name">CT Scan</label>
                            </div>
                            <div class="test-option" data-test="mri">
                                <input type="checkbox" class="test-checkbox" id="test-mri">
                                <label for="test-mri" class="test-name">MRI</label>
                            </div>
                            <div class="test-option" data-test="xray">
                                <input type="checkbox" class="test-checkbox" id="test-xray">
                                <label for="test-xray" class="test-name">X-Ray</label>
                            </div>
                            <div class="test-option" data-test="ultrasound">
                                <input type="checkbox" class="test-checkbox" id="test-ultrasound">
                                <label for="test-ultrasound" class="test-name">Ultrasound</label>
                            </div>
                            <div class="test-option" data-test="blood-test">
                                <input type="checkbox" class="test-checkbox" id="test-blood">
                                <label for="test-blood" class="test-name">Blood Test</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="schedule-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="preferred-date">Preferred Date</label>
                                <input type="date" id="preferred-date">
                            </div>
                            <div class="form-group">
                                <label for="preferred-time">Preferred Time</label>
                                <select id="preferred-time">
                                    <option value="">Select time</option>
                                    <option value="morning">Morning (8AM-12PM)</option>
                                    <option value="afternoon">Afternoon (12PM-4PM)</option>
                                    <option value="evening">Evening (4PM-7PM)</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="additional-notes">Additional Notes (Optional)</label>
                            <textarea id="additional-notes" rows="3" placeholder="Any specific concerns or requirements..."></textarea>
                        </div>
                        <button class="schedule-submit" id="schedule-submit">Confirm Schedule</button>
                    </div>
                </div>
                
                <!-- Molecular Reasons Section - Only shown for high risk -->
                <div class="molecular-reasons" id="molecular-reasons" style="display: none;">
                    <h4>MOLECULAR REASONS OF CANCER</h4>
                    <ul>
                        <li>Mutation in genetic sequence</li>
                        <li>Increased activity of Telomerase which stops contact inhibition</li>
                        <li>Suppression of tumor suppressor gene</li>
                    </ul>
                    <div class="sequence-example">
                        AAATCTGCTAGGCGAT <span class="sequence-arrow">→</span> AAATCTGCTAGGCGCT
                    </div>
                    <p style="text-align: center; margin-top: 10px; font-style: italic;">
                        A single nucleotide change in the genetic sequence can be sufficient to cause cancer
                    </p>
                </div>
                
                <div class="patient-info" id="patient-info">
                    <!-- Patient information will be displayed here -->
                </div>
            </div>
        </div>

        <!-- Graph Section - Moved after Diagnosis Results -->
        <div class="section">
            <h2 class="section-title">Molecular Vibration Analysis</h2>
            
            <div class="graph-container">
                <h3 class="graph-title">Molecular Vibration Spectrum</h3>
                <p class="graph-description">Visual representation of the molecular vibration frequencies detected in the sample</p>
                <div class="graph-canvas-container">
                    <canvas id="vibration-graph"></canvas>
                </div>
            </div>
        </div>
        
        <!-- Disclaimer Section -->
        <div class="disclaimer">
            <i class="fas fa-exclamation-triangle"></i> 
            <strong>Important Notice:</strong> This page demonstrates a conceptual workflow for AI-assisted interpretation of infrared/photoacoustic spectral features. Real diagnostic systems analyze the entire spectrum, perform rigorous preprocessing and validation, and are evaluated in clinical studies. This demo is for education only and the real spectroscopy dataset model will soon be made.
        </div>
    </div>
    
    <!-- Added footer text below the container -->
    <div class="footer-text">
        BioAI Cancer Diagnosis | AI Based Cancer Diagnosis Test Model<br>
        © 2025 BioAI Research, Avi Sinha
    </div>
    
    <!-- Redirect Page -->
    <div class="redirect-page" id="redirect-page">
        <div class="redirect-content">
            <h2 class="redirect-title">PROTOTYPE MODEL</h2>
            <p class="redirect-message">This is a prototype model. The actual model will redirect you to an authorized lab test website integrated with BioAI.</p>
            <button class="back-btn" id="back-btn">Back to Diagnosis</button>
        </div>
    </div>

    <script>
        // Configuration
        const REGION_NAMES = [
            "ENTER THE READING OF (-C=O) VIBRATION OBSERVED IN PHOTOACOUSTIC SPECTROSCOPY (~1720 cm⁻¹)",
            "ENTER THE READING OF (-CH₃) VIBRATION OBSERVED IN PHOTOACOUSTIC SPECTROSCOPY (~1300 cm⁻¹)",
            "ENTER THE READING OF (-C-OH) VIBRATION OBSERVED IN PHOTOACOUSTIC SPECTROSCOPY (~1100 cm⁻¹)",
            "ENTER THE READING OF (-O-H) VIBRATION OBSERVED IN PHOTOACOUSTIC SPECTROSCOPY (~3500 cm⁻¹)"
        ];

        const NORMAL_MEANS = [1.2, 1.8, 2.8, 2.2];
        const NORMAL_STDS = [0.4, 0.6, 0.7, 0.9];
        const THRESHOLD = 0.42; // Best threshold from your model

        // State
        let patientCount = 1;
        let backendAvailable = false;
        let vibrationChart = null;
        let autoTriggerTimeout = null;
        let currentProbability = 0;

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            // Set up Get Started button
            document.getElementById('get-started-btn').addEventListener('click', function() {
                document.getElementById('welcome-screen').style.opacity = '0';
                setTimeout(function() {
                    document.getElementById('welcome-screen').style.display = 'none';
                    document.getElementById('main-content').style.display = 'block';
                }, 500);
            });
            
            // Check backend connection (but don't show status)
            checkBackendConnection();
            
            // Set up event listeners for frequency inputs
            document.querySelectorAll('.frequency-input').forEach((input, index) => {
                input.addEventListener('input', () => {
                    validateInput(index);
                    updateVibrationGraph();
                    
                    // Auto-trigger analysis when all inputs are filled
                    clearTimeout(autoTriggerTimeout);
                    autoTriggerTimeout = setTimeout(autoTriggerAnalysis, 1000);
                });
            });
            
            // Set up event listeners for patient info
            document.getElementById('patient-name').addEventListener('input', validatePatientInfo);
            document.getElementById('patient-age').addEventListener('input', validatePatientInfo);
            
            // Set up event listeners for gender selection
            document.querySelectorAll('input[name="gender"]').forEach(radio => {
                radio.addEventListener('change', validatePatientInfo);
            });
            
            document.getElementById('analyze-btn').addEventListener('click', analyzePatient);
            document.getElementById('next-btn').addEventListener('click', nextPatient);
            
            // Set up action buttons
            document.getElementById('schedule-btn').addEventListener('click', function() {
                document.getElementById('scheduling-options').style.display = 'block';
                prefillSchedulingOptions();
            });
            
            document.getElementById('back-btn').addEventListener('click', function() {
                document.getElementById('redirect-page').style.display = 'none';
            });
            
            // Set up scheduling options
            document.querySelectorAll('.urgency-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.urgency-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    this.classList.add('selected');
                });
            });
            
            document.querySelectorAll('.test-option').forEach(option => {
                option.addEventListener('click', function() {
                    const checkbox = this.querySelector('.test-checkbox');
                    checkbox.checked = !checkbox.checked;
                    this.classList.toggle('selected', checkbox.checked);
                });
            });
            
            document.getElementById('schedule-submit').addEventListener('click', submitSchedule);
            
            // Initialize the vibration graph
            initializeVibrationGraph();
        });

        // Prefill scheduling options based on probability
        function prefillSchedulingOptions() {
            // Set urgency based on probability
            let urgencyLevel = 'low';
            if (currentProbability > 0.8) {
                urgencyLevel = 'high';
            } else if (currentProbability >= 0.5) {
                urgencyLevel = 'medium';
            }
            
            document.querySelectorAll('.urgency-option').forEach(option => {
                if (option.dataset.urgency === urgencyLevel) {
                    option.classList.add('selected');
                } else {
                    option.classList.remove('selected');
                }
            });
            
            // Clear all checkboxes first
            document.querySelectorAll('.test-checkbox').forEach(checkbox => {
                checkbox.checked = false;
            });
            document.querySelectorAll('.test-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // Set test suggestions based on probability
            const suggestionsList = document.getElementById('suggested-tests-list');
            suggestionsList.innerHTML = '';
            
            if (currentProbability > 0.8) {
                // High probability - suggest Biopsy, Blood Test, CT Scan
                suggestionsList.innerHTML = `
                    <li><strong>Biopsy</strong> - Recommended for tissue analysis</li>
                    <li><strong>Blood Test</strong> - Recommended for cancer markers</li>
                    <li><strong>CT Scan</strong> - Recommended for detailed imaging</li>
                `;
                
                // Pre-select these tests
                document.getElementById('test-biopsy').checked = true;
                document.querySelector('.test-option[data-test="biopsy"]').classList.add('selected');
                document.getElementById('test-blood').checked = true;
                document.querySelector('.test-option[data-test="blood-test"]').classList.add('selected');
                document.getElementById('test-ct').checked = true;
                document.querySelector('.test-option[data-test="ct-scan"]').classList.add('selected');
            } else if (currentProbability >= 0.5) {
                // Medium probability - suggest Biopsy and Blood Test
                suggestionsList.innerHTML = `
                    <li><strong>Biopsy</strong> - Recommended for tissue analysis</li>
                    <li><strong>Blood Test</strong> - Recommended for cancer markers</li>
                `;
                
                // Pre-select these tests
                document.getElementById('test-biopsy').checked = true;
                document.querySelector('.test-option[data-test="biopsy"]').classList.add('selected');
                document.getElementById('test-blood').checked = true;
                document.querySelector('.test-option[data-test="blood-test"]').classList.add('selected');
            } else {
                // Low probability - suggest optional Blood Test
                suggestionsList.innerHTML = `
                    <li><strong>Blood Test</strong> - Optional screening test</li>
                `;
                
                // Don't pre-select, but make it easy to select
                document.getElementById('test-blood').checked = false;
                document.querySelector('.test-option[data-test="blood-test"]').classList.remove('selected');
            }
            
            // Set default date (tomorrow)
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            document.getElementById('preferred-date').valueAsDate = tomorrow;
        }

        // Submit schedule
        function submitSchedule() {
            const urgencyOption = document.querySelector('.urgency-option.selected');
            if (!urgencyOption) {
                alert('Please select an urgency level');
                return;
            }
            
            const selectedTests = Array.from(document.querySelectorAll('.test-checkbox:checked'))
                .map(checkbox => checkbox.nextElementSibling.textContent);
            
            if (selectedTests.length === 0) {
                alert('Please select at least one test');
                return;
            }
            
            const preferredDate = document.getElementById('preferred-date').value;
            if (!preferredDate) {
                alert('Please select a preferred date');
                return;
            }
            
            const preferredTime = document.getElementById('preferred-time').value;
            if (!preferredTime) {
                alert('Please select a preferred time');
                return;
            }
            
            // Show the redirect page instead of an alert
            document.getElementById('redirect-page').style.display = 'flex';
            
            // Hide scheduling options
            document.getElementById('scheduling-options').style.display = 'none';
        }

        // Auto-trigger analysis when all inputs are filled
        function autoTriggerAnalysis() {
            // Check if all frequency inputs have values
            const allFilled = Array.from(document.querySelectorAll('.frequency-input'))
                .every(input => input.value && input.value.trim() !== '');
            
            // Check if patient info is filled
            const nameInput = document.getElementById('patient-name');
            const ageInput = document.getElementById('patient-age');
            const genderSelected = document.querySelector('input[name="gender"]:checked');
            const patientInfoFilled = nameInput.value.trim() !== '' && 
                                     ageInput.value && 
                                     parseInt(ageInput.value) >= 1 && 
                                     parseInt(ageInput.value) <= 120 &&
                                     genderSelected;
            
            if (allFilled && patientInfoFilled) {
                analyzePatient();
            }
        }

        // Initialize the vibration graph
        function initializeVibrationGraph() {
            const ctx = document.getElementById('vibration-graph').getContext('2d');
            
            vibrationChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['-C=O (1720 cm⁻¹)', '-CH₃ (1300 cm⁻¹)', '-C-OH (1100 cm⁻¹)', '-O-H (3500 cm⁻¹)'],
                    datasets: [{
                        label: 'Vibration Intensity',
                        data: [0, 0, 0, 0],
                        borderColor: '#0d4a8c',
                        backgroundColor: 'rgba(13, 74, 140, 0.1)',
                        borderWidth: 2,
                        pointBackgroundColor: '#0d4a8c',
                        pointBorderColor: '#ffffff',
                        pointBorderWidth: 2,
                        pointRadius: 6,
                        pointHoverRadius: 8,
                        fill: true,
                        tension: 0.4
                    }, {
                        label: 'Normal Range',
                        data: NORMAL_MEANS,
                        borderColor: '#2ecc71',
                        backgroundColor: 'transparent',
                        borderWidth: 2,
                        borderDash: [5, 5],
                        pointRadius: 0,
                        fill: false
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Intensity (MHz)',
                                font: {
                                    size: 14,
                                    weight: 'bold'
                                }
                            },
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Molecular Vibration Types',
                                font: {
                                    size: 14,
                                    weight: 'bold'
                                }
                            },
                            grid: {
                                display: false
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                font: {
                                    size: 12
                                }
                            }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.7)',
                            titleFont: {
                                size: 14
                            },
                            bodyFont: {
                                size: 13
                            }
                        }
                    }
                }
            });
        }

        // Update the vibration graph with current input values
        function updateVibrationGraph() {
            if (!vibrationChart) return;
            
            const values = [];
            for (let i = 1; i <= 4; i++) {
                const input = document.getElementById(`input${i}`);
                values.push(input.value ? parseFloat(input.value) : 0);
            }
            
            vibrationChart.data.datasets[0].data = values;
            vibrationChart.update();
        }

        // Check if backend is available (but don't display status)
        async function checkBackendConnection() {
            try {
                // In a real implementation, this would be your actual backend URL
                const response = await fetch('https://jsonplaceholder.typicode.com/posts/1', {
                    method: 'GET'
                });
                
                if (response.ok) {
                    backendAvailable = true;
                } else {
                    backendAvailable = false;
                }
            } catch (error) {
                backendAvailable = false;
            }
        }

        // Validate patient information
        function validatePatientInfo() {
            const nameInput = document.getElementById('patient-name');
            const ageInput = document.getElementById('patient-age');
            const genderFeedback = document.getElementById('gender-feedback');
            const nameFeedback = document.getElementById('name-feedback');
            const ageFeedback = document.getElementById('age-feedback');
            
            // Validate name
            if (nameInput.value.trim() === '') {
                nameFeedback.className = 'feedback error';
                nameFeedback.innerHTML = '⚠️ Please enter patient name';
                nameInput.style.borderColor = '#e74c3c';
            } else {
                nameFeedback.className = 'feedback';
                nameInput.style.borderColor = '';
            }
            
            // Validate age
            if (!ageInput.value) {
                ageFeedback.className = 'feedback error';
                ageFeedback.innerHTML = '⚠️ Please enter patient age';
                ageInput.style.borderColor = '#e74c3c';
            } else if (parseInt(ageInput.value) < 1 || parseInt(ageInput.value) > 120) {
                ageFeedback.className = 'feedback error';
                ageFeedback.innerHTML = '⚠️ Please enter a valid age (1-120)';
                ageInput.style.borderColor = '#e74c3c';
            } else {
                ageFeedback.className = 'feedback';
                ageInput.style.borderColor = '';
            }
            
            // Validate gender
            const genderSelected = document.querySelector('input[name="gender"]:checked');
            if (!genderSelected) {
                genderFeedback.className = 'feedback error';
                genderFeedback.innerHTML = '⚠️ Please select gender';
            } else {
                genderFeedback.className = 'feedback';
            }
        }

        // Validate input and provide feedback
        function validateInput(index) {
            const input = document.getElementById(`input${index+1}`);
            const feedback = document.getElementById(`feedback${index+1}`);
            
            if (!input.value) {
                feedback.className = 'feedback';
                return;
            }
            
            const value = parseFloat(input.value);
            
            // Check for negative values
            if (value < 0) {
                feedback.className = 'feedback error';
                feedback.innerHTML = '❌ Negative values are not allowed';
                input.style.borderColor = '#e74c3c';
                return;
            }
            
            const mean = NORMAL_MEANS[index];
            const std = NORMAL_STDS[index];
            
            if (Math.abs(value - mean) <= std) {
                feedback.className = 'feedback normal';
                feedback.innerHTML = '✅ At normal level';
                input.style.borderColor = '';
            } else if (value > mean) {
                feedback.className = 'feedback high';
                feedback.innerHTML = '⚠️ Higher than normal level';
                input.style.borderColor = '';
            } else {
                feedback.className = 'feedback low';
                feedback.innerHTML = '⚠️ Lower than normal level';
                input.style.borderColor = '';
            }
        }

        // Analyze patient data
        async function analyzePatient() {
            // Validate patient info
            const nameInput = document.getElementById('patient-name');
            const ageInput = document.getElementById('patient-age');
            const genderSelected = document.querySelector('input[name="gender"]:checked');
            
            if (nameInput.value.trim() === '' || !ageInput.value || 
                parseInt(ageInput.value) < 1 || parseInt(ageInput.value) > 120 || !genderSelected) {
                validatePatientInfo();
                alert('Please fill in all patient information including gender');
                return;
            }
            
            // Get input values
            const values = [];
            let allFilled = true;
            let hasNegative = false;
            
            for (let i = 1; i <= 4; i++) {
                const input = document.getElementById(`input${i}`);
                if (!input.value) {
                    allFilled = false;
                    input.style.borderColor = '#e74c3c';
                } else if (parseFloat(input.value) < 0) {
                    hasNegative = true;
                    input.style.borderColor = '#e74c3c';
                } else {
                    input.style.borderColor = '';
                    values.push(parseFloat(input.value));
                }
            }
            
            if (!allFilled) {
                alert('Please fill in all fields');
                return;
            }
            
            if (hasNegative) {
                alert('Negative values are not allowed. Please enter positive values only.');
                return;
            }
            
            // Show loading state
            document.getElementById('analyze-btn').innerHTML = '<i class="fas fa-spinner fa-spin"></i> Analyzing...';
            document.getElementById('analyze-btn').disabled = true;
            
            let probability;
            
            if (backendAvailable) {
                // Call real backend API
                try {
                    // In a real implementation, this would be your actual backend endpoint
                    const response = await fetch('https://your-backend-url.com/api/predict', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({ values: values })
                    });
                    
                    if (response.ok) {
                        const data = await response.json();
                        probability = data.probability;
                    } else {
                        throw new Error('Backend prediction failed');
                    }
                } catch (error) {
                    console.error('Backend call failed:', error);
                    // Fall back to demo mode
                    probability = simulatePrediction(values);
                }
            } else {
                // Use demo mode
                probability = simulatePrediction(values);
            }
            
            // Store current probability for scheduling
            currentProbability = probability;
            
            // Display results
            displayResults(probability, nameInput.value, ageInput.value, genderSelected.value);
            
            // Reset button
            document.getElementById('analyze-btn').innerHTML = 'Run Auto Analysis';
            document.getElementById('analyze-btn').disabled = false;
            
            // Show next patient button
            document.getElementById('next-patient').style.display = 'block';
            document.getElementById('analyze-btn').style.display = 'none';
        }

        // Simulate prediction (for demo purposes)
        function simulatePrediction(values) {
            // This is a simplified simulation of your model's prediction logic
            let score = 0;
            for (let i = 0; i < values.length; i++) {
                const deviation = (values[i] - NORMAL_MEANS[i]) / NORMAL_STDS[i];
                score += Math.max(0, deviation);
            }
            
            // Convert to probability (sigmoid-like function)
            const rawProb = 1 / (1 + Math.exp(-score * 0.5 + 2));
            
            // Add some randomness to simulate real model behavior
            return Math.min(0.99, rawProb + (Math.random() * 0.1 - 0.05));
        }

        // Display results
        function displayResults(probability, name, age, gender) {
            const resultDiv = document.getElementById('result');
            const probabilityFill = document.getElementById('probability-fill');
            const probabilityValue = document.getElementById('probability-value');
            const riskLevel = document.getElementById('risk-level');
            const recommendation = document.getElementById('recommendation');
            const patientInfo = document.getElementById('patient-info');
            const molecularReasons = document.getElementById('molecular-reasons');
            const actionButtons = document.getElementById('action-buttons');
            const schedulingOptions = document.getElementById('scheduling-options');
            
            // Hide scheduling options initially
            schedulingOptions.style.display = 'none';
            
            // Update probability meter
            const percentage = Math.round(probability * 100);
            probabilityFill.style.width = `${percentage}%`;
            probabilityValue.textContent = percentage;
            
            // Set colors and text based on risk
            if (probability >= THRESHOLD) {
                resultDiv.className = 'result high-risk';
                probabilityFill.style.background = 'linear-gradient(90deg, #e74c3c, #c0392b)';
                riskLevel.innerHTML = '⚠️ HIGH RISK OF CANCER DETECTION';
                riskLevel.style.color = '#c0392b';
                
                // Show molecular reasons section for high risk
                molecularReasons.style.display = 'block';
            } else {
                resultDiv.className = 'result low-risk';
                probabilityFill.style.background = 'linear-gradient(90deg, #2ecc71, #27ae60)';
                riskLevel.innerHTML = '✅ LOW RISK OF CANCER DETECTION';
                riskLevel.style.color = '#27ae60';
                
                // Hide molecular reasons section for low risk
                molecularReasons.style.display = 'none';
            }
            
            // Set recommendation based on probability ranges
            if (probability > 0.8) {
                recommendation.innerHTML = `<strong>HIGH PRIORITY AND URGENT FOLLOW UP:</strong> <strong>${name}</strong> has a very high probability of cancer detection and requires immediate medical attention, including biopsy sample analysis, CT scans, MRI, or X-rays.`;
            } else if (probability >= 0.5 && probability <= 0.8) {
                recommendation.innerHTML = `<strong>SECONDARY DIAGNOSTICS:</strong> <strong>${name}</strong> has a moderate probability of cancer detection and should undergo secondary diagnostics as already in the system.`;
            } else {
                recommendation.innerHTML = `<strong>ROUTINE SCREENING FOLLOW UP:</strong> <strong>${name}</strong> has a low probability of cancer detection but should maintain routine screening follow-up.`;
            }
            
            // Show action buttons for all probability levels
            actionButtons.style.display = 'flex';
            
            // Display patient information
            patientInfo.innerHTML = `
                <p><strong>Patient Name:</strong> ${name}</p>
                <p><strong>Patient Age:</strong> ${age}</p>
                <p><strong>Patient Gender:</strong> ${gender.charAt(0).toUpperCase() + gender.slice(1)}</p>
                <p><strong>Diagnosis Date:</strong> ${new Date().toLocaleDateString()}</p>
            `;
            
            // Show results
            resultDiv.style.display = 'block';
        }

        // Reset for next patient
        function nextPatient() {
            patientCount++;
            
            // Clear inputs
            document.getElementById('patient-name').value = '';
            document.getElementById('patient-age').value = '';
            document.getElementById('name-feedback').className = 'feedback';
            document.getElementById('age-feedback').className = 'feedback';
            document.getElementById('gender-feedback').className = 'feedback';
            
            // Clear gender selection
            document.querySelectorAll('input[name="gender"]').forEach(radio => {
                radio.checked = false;
            });
            
            for (let i = 1; i <= 4; i++) {
                document.getElementById(`input${i}`).value = '';
                document.getElementById(`feedback${i}`).className = 'feedback';
            }
            
            // Reset graph
            if (vibrationChart) {
                vibrationChart.data.datasets[0].data = [0, 0, 0, 0];
                vibrationChart.update();
            }
            
            // Hide results
            document.getElementById('result').style.display = 'none';
            
            // Hide scheduling options
            document.getElementById('scheduling-options').style.display = 'none';
            
            // Update patient counter
            document.getElementById('patient-counter').textContent = `Patient ${patientCount}: Provide IR frequency readings in Mega Hertz (MHz)`;
            
            // Show analyze button, hide next button
            document.getElementById('analyze-btn').style.display = 'block';
            document.getElementById('next-patient').style.display = 'none';
        }
    </script>
</body>
</html>
