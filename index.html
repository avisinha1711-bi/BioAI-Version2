<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BioAI – AI-powered Cancer Photoacoustic Diagnosis</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: #ffffff;
            color: #222222;
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
        }
        
        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            flex: 1;
        }
        
        header {
            text-align: center;
            padding: 20px 0;
            margin-bottom: 30px;
        }
        
        .logo {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin-bottom: 10px;
        }
        
        .logo-text {
            font-size: 3rem;
            font-weight: 700;
            color: #0d2a4d;
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: #0d2a4d;
            margin-top: 10px;
            font-weight: 600;
        }
        
        .author {
            font-size: 1rem;
            color: #0d2a4d;
            margin-top: 5px;
            font-weight: 500;
        }
        
        .section {
            margin: 40px 0;
            padding: 30px;
            background: #ffffff;
            border-radius: 15px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
        }
        
        /* Modified: Added dark black boundary for Patient Information and Infrared Frequency Readings */
        .section.patient-info-section,
        .section.infrared-readings-section {
            border: 3px solid #000000;
        }
        
        .section-title {
            font-size: 1.8rem;
            color: #0d4a8c;
            margin-bottom: 25px;
            text-align: center;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(13, 74, 140, 0.3);
        }
        
        .input-group {
            margin-bottom: 25px;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 12px;
            font-size: 1.1rem;
            color: #333333;
            font-weight: 500;
        }
        
        .input-group input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e1e5eb;
            border-radius: 8px;
            font-size: 1.1rem;
            background: #ffffff;
            color: #222222;
            transition: all 0.3s;
        }
        
        .input-group input:focus {
            outline: none;
            border-color: #0d4a8c;
            box-shadow: 0 0 0 3px rgba(13, 74, 140, 0.2);
        }
        
        .feedback {
            margin-top: 10px;
            padding: 10px;
            border-radius: 5px;
            font-size: 0.95rem;
            display: none;
        }
        
        .feedback.normal {
            background: rgba(46, 204, 113, 0.15);
            color: #1e7e34;
            display: block;
            border-left: 4px solid #1e7e34;
        }
        
        .feedback.high {
            background: rgba(231, 76, 60, 0.15);
            color: #a71e2a;
            display: block;
            border-left: 4px solid #a71e2a;
        }
        
        .feedback.low {
            background: rgba(241, 196, 15, 0.15);
            color: #b37400;
            display: block;
            border-left: 4px solid #b37400;
        }
        
        .feedback.error {
            background: rgba(231, 76, 60, 0.15);
            color: #a71e2a;
            display: block;
            border-left: 4px solid #a71e2a;
        }
        
        .btn {
            display: block;
            width: 100%;
            padding: 18px;
            background: linear-gradient(45deg, #0d4a8c, #0d7ba8);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            margin-top: 20px;
            box-shadow: 0 4px 6px rgba(13, 74, 140, 0.2);
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 14px rgba(13, 74, 140, 0.3);
            background: linear-gradient(45deg, #0a3a70, #0b6a8a);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn-alt {
            background: linear-gradient(45deg, #0d2a4d, #0d4a8c);
        }
        
        .btn-alt:hover {
            background: linear-gradient(45deg, #081d38, #0a3a70);
        }
        
        .result {
            margin-top: 30px;
            padding: 25px;
            border-radius: 10px;
            text-align: center;
            display: none;
        }
        
        .result.high-risk {
            background: #ffeaea;
            border: 2px solid #e74c3c;
            display: block;
        }
        
        .result.low-risk {
            background: #e8f7ef;
            border: 2px solid #2ecc71;
            display: block;
        }
        
        .probability-meter {
            height: 30px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 15px;
            margin: 20px 0;
            overflow: hidden;
            position: relative;
            border: 1px solid #e1e5eb;
        }
        
        .probability-fill {
            height: 100%;
            border-radius: 15px;
            transition: width 0.5s ease-in-out;
        }
        
        .probability-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-size: 0.9rem;
            color: #555555;
        }
        
        .risk-level {
            font-size: 1.5rem;
            font-weight: 700;
            margin: 15px 0;
        }
        
        .recommendation {
            margin-top: 15px;
            font-size: 1.1rem;
            line-height: 1.5;
            padding: 15px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.7);
            color: #222222;
        }
        
        .patient-info {
            margin-top: 20px;
            padding: 15px;
            background: #ffffff;
            border-radius: 8px;
            text-align: left;
            border: 2px solid #000000;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        .patient-info p {
            margin: 10px 0;
            font-size: 1.1rem;
            color: #222222;
        }
        
        .patient-counter {
            text-align: center;
            font-size: 1.2rem;
            margin-bottom: 20px;
            color: #0d4a8c;
            font-weight: 600;
            padding: 15px;
            background: #ffffff;
            border-radius: 8px;
            border: 2px solid #000000;
        }
        
        .next-patient {
            display: none;
            margin-top: 20px;
            text-align: center;
        }
        
        /* Hide the API status element */
        .api-status {
            display: none !important;
        }
        
        .disclaimer {
            margin-top: 30px;
            padding: 15px;
            background: #fff3cd;
            border: 2px solid #856404;
            border-radius: 8px;
            font-size: 0.85rem;
            color: #664d03;
            text-align: center;
            font-weight: 500;
        }
        
        .footer-text {
            text-align: center;
            margin-top: 20px;
            padding: 15px;
            color: #4a6fa5;
            font-size: 1rem;
            font-weight: 500;
        }
        
        /* Graph container styles */
        .graph-container {
            margin: 30px 0;
            padding: 20px;
            background: #ffffff;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
            border: 1px solid #e1e5eb;
        }
        
        .graph-title {
            font-size: 1.5rem;
            color: #0d4a8c;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .graph-description {
            font-size: 1rem;
            color: #555;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .graph-canvas-container {
            position: relative;
            height: 300px;
            width: 100%;
        }
        
        @media (max-width: 768px) {
            .container {
                width: 95%;
                padding: 20px;
            }
            
            .logo-text {
                font-size: 2.5rem;
            }
            
            .section {
                padding: 20px;
            }
            
            .section-title {
                font-size: 1.5rem;
            }
            
            .disclaimer {
                font-size: 0.8rem;
                padding: 12px;
            }
            
            .footer-text {
                font-size: 0.9rem;
                padding: 10px;
            }
            
            .graph-canvas-container {
                height: 250px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <div class="logo-text">BioAI</div>
            </div>
            <div class="subtitle">AI-powered Cancer Photoacoustic Diagnosis</div>
            <div class="author">Developed by: Avi Sinha</div>
        </header>

        <!-- API status element is present but hidden with CSS -->
        <div class="api-status" id="api-status" style="display: none;">
            <i class="fas fa-sync fa-spin"></i> Checking backend connection...
        </div>

        <!-- Modified: Added patient-info-section class for dark black boundary -->
        <div class="section patient-info-section">
            <h2 class="section-title">Patient Information</h2>
            
            <div class="input-group">
                <label for="patient-name">Patient Name</label>
                <input type="text" id="patient-name" placeholder="Enter patient name...">
                <div class="feedback" id="name-feedback"></div>
            </div>
            
            <div class="input-group">
                <label for="patient-age">Patient Age</label>
                <input type="number" id="patient-age" min="1" max="120" placeholder="Enter patient age...">
                <div class="feedback" id="age-feedback"></div>
            </div>
        </div>

        <!-- Modified: Added infrared-readings-section class for dark black boundary -->
        <div class="section infrared-readings-section">
            <!-- Moved patient counter here, just above the section title -->
            <div class="patient-counter" id="patient-counter">
                Patient 1: Provide IR frequency readings in Mega Hertz (MHz)
            </div>
            
            <h2 class="section-title">Infrared Frequency Readings</h2>
            
            <div class="input-group">
                <label for="input1">ENTER THE READING OF (-C=O) VIBRATION OBSERVED IN PHOTOACOUSTIC SPECTROSCOPY (~1720 cm⁻¹)</label>
                <input type="number" step="0.01" id="input1" class="frequency-input" placeholder="Enter value...">
                <div class="feedback" id="feedback1"></div>
            </div>
            
            <div class="input-group">
                <label for="input2">ENTER THE READING OF (-CH₃) VIBRATION OBSERVED IN PHOTOACOUSTIC SPECTROSCOPY (~1300 cm⁻¹)</label>
                <input type="number" step="0.01" id="input2" class="frequency-input" placeholder="Enter value...">
                <div class="feedback" id="feedback2"></div>
            </div>
            
            <div class="input-group">
                <label for="input3">ENTER THE READING OF (-C-OH) VIBRATION OBSERVED IN PHOTOACOUSTIC SPECTROSCOPY (~1100 cm⁻¹)</label>
                <input type="number" step="0.01" id="input3" class="frequency-input" placeholder="Enter value...">
                <div class="feedback" id="feedback3"></div>
            </div>
            
            <div class="input-group">
                <label for="input4">ENTER THE READING OF (-O-H) VIBRATION OBSERVED IN PHOTOACOUSTIC SPECTROSCOPY (~3500 cm⁻¹)</label>
                <input type="number" step="0.01" id="input4" class="frequency-input" placeholder="Enter value...">
                <div class="feedback" id="feedback4"></div>
            </div>
            
            <button class="btn" id="analyze-btn">Analyze Patient Data</button>
            
            <div class="next-patient" id="next-patient">
                <button class="btn btn-alt" id="next-btn">Next Patient</button>
            </div>
        </div>

        <div class="section">
            <h2 class="section-title">Diagnosis Results</h2>
            
            <div class="result" id="result">
                <h3>Patient Diagnosis</h3>
                
                <div class="probability-meter">
                    <div class="probability-fill" id="probability-fill"></div>
                </div>
                
                <div class="probability-labels">
                    <span>0%</span>
                    <span>50%</span>
                    <span>100%</span>
                </div>
                
                <div class="risk-level" id="risk-level"></div>
                <div id="probability-text">Probability: <span id="probability-value">0</span>%</div>
                <div class="recommendation" id="recommendation"></div>
                
                <div class="patient-info" id="patient-info">
                    <!-- Patient information will be displayed here -->
                </div>
            </div>
        </div>

        <!-- Graph Section - Moved after Diagnosis Results -->
        <div class="section">
            <h2 class="section-title">Molecular Vibration Analysis</h2>
            
            <div class="graph-container">
                <h3 class="graph-title">Molecular Vibration Spectrum</h3>
                <p class="graph-description">Visual representation of the molecular vibration frequencies detected in the sample</p>
                <div class="graph-canvas-container">
                    <canvas id="vibration-graph"></canvas>
                </div>
            </div>
        </div>
        
        <!-- Disclaimer Section -->
        <div class="disclaimer">
            <i class="fas fa-exclamation-triangle"></i> 
            <strong>Important Notice:</strong> This page demonstrates a conceptual workflow for AI-assisted interpretation of infrared/photoacoustic spectral features. Real diagnostic systems analyze the entire spectrum, perform rigorous preprocessing and validation, and are evaluated in clinical studies. This demo is for education only and the real spectroscopy dataset model will soon be made.
        </div>
    </div>
    
    <!-- Added footer text below the container -->
    <div class="footer-text">
        BioAI Cancer Diagnosis | AI Based Cancer Diagnosis Test Model<br>
        © 2025 BioAI Research, Avi Sinha
    </div>

    <script>
        // Configuration
        const REGION_NAMES = [
            "ENTER THE READING OF (-C=O) VIBRATION OBSERVED IN PHOTOACOUSTIC SPECTROSCOPY (~1720 cm⁻¹)",
            "ENTER THE READING OF (-CH₃) VIBRATION OBSERVED IN PHOTOACOUSTIC SPECTROSCOPY (~1300 cm⁻¹)",
            "ENTER THE READING OF (-C-OH) VIBRATION OBSERVED IN PHOTOACOUSTIC SPECTROSCOPY (~1100 cm⁻¹)",
            "ENTER THE READING OF (-O-H) VIBRATION OBSERVED IN PHOTOACOUSTIC SPECTROSCOPY (~3500 cm⁻¹)"
        ];

        const NORMAL_MEANS = [1.2, 1.8, 2.8, 2.2];
        const NORMAL_STDS = [0.4, 0.6, 0.7, 0.9];
        const THRESHOLD = 0.42; // Best threshold from your model

        // State
        let patientCount = 1;
        let backendAvailable = false;
        let vibrationChart = null;

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            // Check backend connection (but don't show status)
            checkBackendConnection();
            
            // Set up event listeners for frequency inputs
            document.querySelectorAll('.frequency-input').forEach((input, index) => {
                input.addEventListener('input', () => {
                    validateInput(index);
                    updateVibrationGraph();
                });
            });
            
            // Set up event listeners for patient info
            document.getElementById('patient-name').addEventListener('input', validatePatientInfo);
            document.getElementById('patient-age').addEventListener('input', validatePatientInfo);
            
            document.getElementById('analyze-btn').addEventListener('click', analyzePatient);
            document.getElementById('next-btn').addEventListener('click', nextPatient);
            
            // Initialize the vibration graph
            initializeVibrationGraph();
        });

        // Initialize the vibration graph
        function initializeVibrationGraph() {
            const ctx = document.getElementById('vibration-graph').getContext('2d');
            
            vibrationChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['-C=O (1720 cm⁻¹)', '-CH₃ (1300 cm⁻¹)', '-C-OH (1100 cm⁻¹)', '-O-H (3500 cm⁻¹)'],
                    datasets: [{
                        label: 'Vibration Intensity',
                        data: [0, 0, 0, 0],
                        borderColor: '#0d4a8c',
                        backgroundColor: 'rgba(13, 74, 140, 0.1)',
                        borderWidth: 2,
                        pointBackgroundColor: '#0d4a8c',
                        pointBorderColor: '#ffffff',
                        pointBorderWidth: 2,
                        pointRadius: 6,
                        pointHoverRadius: 8,
                        fill: true,
                        tension: 0.4
                    }, {
                        label: 'Normal Range',
                        data: NORMAL_MEANS,
                        borderColor: '#2ecc71',
                        backgroundColor: 'transparent',
                        borderWidth: 2,
                        borderDash: [5, 5],
                        pointRadius: 0,
                        fill: false
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Intensity (MHz)',
                                font: {
                                    size: 14,
                                    weight: 'bold'
                                }
                            },
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Molecular Vibration Types',
                                font: {
                                    size: 14,
                                    weight: 'bold'
                                }
                            },
                            grid: {
                                display: false
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                font: {
                                    size: 12
                                }
                            }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.7)',
                            titleFont: {
                                size: 14
                            },
                            bodyFont: {
                                size: 13
                            }
                        }
                    }
                }
            });
        }

        // Update the vibration graph with current input values
        function updateVibrationGraph() {
            if (!vibrationChart) return;
            
            const values = [];
            for (let i = 1; i <= 4; i++) {
                const input = document.getElementById(`input${i}`);
                values.push(input.value ? parseFloat(input.value) : 0);
            }
            
            vibrationChart.data.datasets[0].data = values;
            vibrationChart.update();
        }

        // Check if backend is available (but don't display status)
        async function checkBackendConnection() {
            try {
                // In a real implementation, this would be your actual backend URL
                const response = await fetch('https://jsonplaceholder.typicode.com/posts/1', {
                    method: 'GET'
                });
                
                if (response.ok) {
                    backendAvailable = true;
                } else {
                    backendAvailable = false;
                }
            } catch (error) {
                backendAvailable = false;
            }
        }

        // Validate patient information
        function validatePatientInfo() {
            const nameInput = document.getElementById('patient-name');
            const ageInput = document.getElementById('patient-age');
            const nameFeedback = document.getElementById('name-feedback');
            const ageFeedback = document.getElementById('age-feedback');
            
            // Validate name
            if (nameInput.value.trim() === '') {
                nameFeedback.className = 'feedback error';
                nameFeedback.innerHTML = '⚠️ Please enter patient name';
                nameInput.style.borderColor = '#e74c3c';
            } else {
                nameFeedback.className = 'feedback';
                nameInput.style.borderColor = '';
            }
            
            // Validate age
            if (!ageInput.value) {
                ageFeedback.className = 'feedback error';
                ageFeedback.innerHTML = '⚠️ Please enter patient age';
                ageInput.style.borderColor = '#e74c3c';
            } else if (parseInt(ageInput.value) < 1 || parseInt(ageInput.value) > 120) {
                ageFeedback.className = 'feedback error';
                ageFeedback.innerHTML = '⚠️ Please enter a valid age (1-120)';
                ageInput.style.borderColor = '#e74c3c';
            } else {
                ageFeedback.className = 'feedback';
                ageInput.style.borderColor = '';
            }
        }

        // Validate input and provide feedback
        function validateInput(index) {
            const input = document.getElementById(`input${index+1}`);
            const feedback = document.getElementById(`feedback${index+1}`);
            
            if (!input.value) {
                feedback.className = 'feedback';
                return;
            }
            
            const value = parseFloat(input.value);
            
            // Check for negative values
            if (value < 0) {
                feedback.className = 'feedback error';
                feedback.innerHTML = '❌ Negative values are not allowed';
                input.style.borderColor = '#e74c3c';
                return;
            }
            
            const mean = NORMAL_MEANS[index];
            const std = NORMAL_STDS[index];
            
            if (Math.abs(value - mean) <= std) {
                feedback.className = 'feedback normal';
                feedback.innerHTML = '✅ At normal level';
                input.style.borderColor = '';
            } else if (value > mean) {
                feedback.className = 'feedback high';
                feedback.innerHTML = '⚠️ Higher than normal level';
                input.style.borderColor = '';
            } else {
                feedback.className = 'feedback low';
                feedback.innerHTML = '⚠️ Lower than normal level';
                input.style.borderColor = '';
            }
        }

        // Analyze patient data
        async function analyzePatient() {
            // Validate patient info
            const nameInput = document.getElementById('patient-name');
            const ageInput = document.getElementById('patient-age');
            
            if (nameInput.value.trim() === '' || !ageInput.value || 
                parseInt(ageInput.value) < 1 || parseInt(ageInput.value) > 120) {
                validatePatientInfo();
                alert('Please fill in valid patient information');
                return;
            }
            
            // Get input values
            const values = [];
            let allFilled = true;
            let hasNegative = false;
            
            for (let i = 1; i <= 4; i++) {
                const input = document.getElementById(`input${i}`);
                if (!input.value) {
                    allFilled = false;
                    input.style.borderColor = '#e74c3c';
                } else if (parseFloat(input.value) < 0) {
                    hasNegative = true;
                    input.style.borderColor = '#e74c3c';
                } else {
                    input.style.borderColor = '';
                    values.push(parseFloat(input.value));
                }
            }
            
            if (!allFilled) {
                alert('Please fill in all fields');
                return;
            }
            
            if (hasNegative) {
                alert('Negative values are not allowed. Please enter positive values only.');
                return;
            }
            
            // Show loading state
            document.getElementById('analyze-btn').innerHTML = '<i class="fas fa-spinner fa-spin"></i> Analyzing...';
            document.getElementById('analyze-btn').disabled = true;
            
            let probability;
            
            if (backendAvailable) {
                // Call real backend API
                try {
                    // In a real implementation, this would be your actual backend endpoint
                    const response = await fetch('https://your-backend-url.com/api/predict', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({ values: values })
                    });
                    
                    if (response.ok) {
                        const data = await response.json();
                        probability = data.probability;
                    } else {
                        throw new Error('Backend prediction failed');
                    }
                } catch (error) {
                    console.error('Backend call failed:', error);
                    // Fall back to demo mode
                    probability = simulatePrediction(values);
                }
            } else {
                // Use demo mode
                probability = simulatePrediction(values);
            }
            
            // Display results
            displayResults(probability, nameInput.value, ageInput.value);
            
            // Reset button
            document.getElementById('analyze-btn').innerHTML = 'Analyze Patient Data';
            document.getElementById('analyze-btn').disabled = false;
            
            // Show next patient button
            document.getElementById('next-patient').style.display = 'block';
            document.getElementById('analyze-btn').style.display = 'none';
        }

        // Simulate prediction (for demo purposes)
        function simulatePrediction(values) {
            // This is a simplified simulation of your model's prediction logic
            let score = 0;
            for (let i = 0; i < values.length; i++) {
                const deviation = (values[i] - NORMAL_MEANS[i]) / NORMAL_STDS[i];
                score += Math.max(0, deviation);
            }
            
            // Convert to probability (sigmoid-like function)
            const rawProb = 1 / (1 + Math.exp(-score * 0.5 + 2));
            
            // Add some randomness to simulate real model behavior
            return Math.min(0.99, rawProb + (Math.random() * 0.1 - 0.05));
        }

        // Display results
        function displayResults(probability, name, age) {
            const resultDiv = document.getElementById('result');
            const probabilityFill = document.getElementById('probability-fill');
            const probabilityValue = document.getElementById('probability-value');
            const riskLevel = document.getElementById('risk-level');
            const recommendation = document.getElementById('recommendation');
            const patientInfo = document.getElementById('patient-info');
            
            // Update probability meter
            const percentage = Math.round(probability * 100);
            probabilityFill.style.width = `${percentage}%`;
            probabilityValue.textContent = percentage;
            
            // Set colors and text based on risk
            if (probability >= THRESHOLD) {
                resultDiv.className = 'result high-risk';
                probabilityFill.style.background = 'linear-gradient(90deg, #e74c3c, #c0392b)';
                riskLevel.innerHTML = '⚠️ HIGH RISK OF CANCER DETECTION';
                riskLevel.style.color = '#c0392b';
                recommendation.innerHTML = `<strong>${name}</strong> has a high probability of cancer detection and may require further diagnosis through biopsy sample analysis, CT scans, MRI, or X-rays.`;
            } else {
                resultDiv.className = 'result low-risk';
                probabilityFill.style.background = 'linear-gradient(90deg, #2ecc71, #27ae60)';
                riskLevel.innerHTML = '✅ LOW RISK OF CANCER DETECTION';
                riskLevel.style.color = '#27ae60';
                recommendation.innerHTML = `<strong>${name}</strong> has a low probability of cancer detection but may need regular monitoring if symptoms persist.`;
            }
            
            // Display patient information
            patientInfo.innerHTML = `
                <p><strong>Patient Name:</strong> ${name}</p>
                <p><strong>Patient Age:</strong> ${age}</p>
                <p><strong>Diagnosis Date:</strong> ${new Date().toLocaleDateString()}</p>
            `;
            
            // Show results
            resultDiv.style.display = 'block';
        }

        // Reset for next patient
        function nextPatient() {
            patientCount++;
            
            // Clear inputs
            document.getElementById('patient-name').value = '';
            document.getElementById('patient-age').value = '';
            document.getElementById('name-feedback').className = 'feedback';
            document.getElementById('age-feedback').className = 'feedback';
            
            for (let i = 1; i <= 4; i++) {
                document.getElementById(`input${i}`).value = '';
                document.getElementById(`feedback${i}`).className = 'feedback';
            }
            
            // Reset graph
            if (vibrationChart) {
                vibrationChart.data.datasets[0].data = [0, 0, 0, 0];
                vibrationChart.update();
            }
            
            // Hide results
            document.getElementById('result').style.display = 'none';
            
            // Update patient counter
            document.getElementById('patient-counter').textContent = `Patient ${patientCount}: Provide IR frequency readings in Mega Hertz (MHz)`;
            
            // Show analyze button, hide next button
            document.getElementById('analyze-btn').style.display = 'block';
            document.getElementById('next-patient').style.display = 'none';
        }
    </script>
</body>
</html> 
